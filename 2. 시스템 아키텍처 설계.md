# 시스템 아키텍처 설계

## 1. 전체 시스템 구조 설계 (클라이언트-서버 모델)

### 1.1 클라이언트 (iOS 앱 및 웹)
- iOS 네이티브 앱 (Swift/SwiftUI)
- 반응형 웹 애플리케이션 (React.js)

### 1.2 서버
- 애플리케이션 서버: Node.js with Express.js
- 웹 서버: Nginx (리버스 프록시 및 로드 밸런싱)

### 1.3 데이터베이스
- 주 데이터베이스: PostgreSQL (사용자 정보, 학습 데이터 등)
- 캐시 및 세션 관리: Redis

### 1.4 클라우드 인프라
- Amazon Web Services (AWS)
  - EC2: 애플리케이션 및 웹 서버 호스팅
  - RDS: PostgreSQL 데이터베이스 호스팅
  - ElastiCache: Redis 호스팅
  - S3: 정적 파일 및 사용자 업로드 파일 저장
  - CloudFront: 콘텐츠 전송 네트워크 (CDN)

### 1.5 외부 서비스 연동
- Firebase: 푸시 알림
- Stripe: 결제 처리
- Sendgrid: 이메일 서비스

## 2. 데이터베이스 스키마 설계

### 2.1 Users
- id (PK)
- email
- password_hash
- name
- profile_image_url
- created_at
- updated_at

### 2.2 LearningGoals
- id (PK)
- user_id (FK to Users)
- title
- description
- target_date
- status
- created_at
- updated_at

### 2.3 LearningContent
- id (PK)
- title
- description
- content_type (video, text, quiz, etc.)
- category
- difficulty_level
- created_by (FK to Users)
- created_at
- updated_at

### 2.4 UserProgress
- id (PK)
- user_id (FK to Users)
- content_id (FK to LearningContent)
- progress_percentage
- last_accessed_at
- created_at
- updated_at

### 2.5 Quizzes
- id (PK)
- content_id (FK to LearningContent)
- question
- options (JSON array)
- correct_answer
- explanation
- created_at
- updated_at

### 2.6 UserQuizResults
- id (PK)
- user_id (FK to Users)
- quiz_id (FK to Quizzes)
- selected_answer
- is_correct
- time_taken
- created_at

### 2.7 Certifications
- id (PK)
- name
- description
- created_at
- updated_at

### 2.8 UserCertifications
- id (PK)
- user_id (FK to Users)
- certification_id (FK to Certifications)
- status (in progress, completed)
- completion_date
- created_at
- updated_at

## 3. API 엔드포인트 정의

### 3.1 사용자 관리
- POST /api/users/register
- POST /api/users/login
- GET /api/users/profile
- PUT /api/users/profile

### 3.2 학습 목표
- POST /api/learning-goals
- GET /api/learning-goals
- PUT /api/learning-goals/:id
- DELETE /api/learning-goals/:id

### 3.3 학습 콘텐츠
- GET /api/learning-content
- GET /api/learning-content/:id
- POST /api/learning-content (관리자용)
- PUT /api/learning-content/:id (관리자용)
- DELETE /api/learning-content/:id (관리자용)

### 3.4 사용자 진행 상황
- GET /api/user-progress
- POST /api/user-progress
- PUT /api/user-progress/:content_id

### 3.5 퀴즈
- GET /api/quizzes/:content_id
- POST /api/quizzes/submit
- GET /api/quizzes/results/:quiz_id

### 3.6 대결 모드
- POST /api/battles/start
- GET /api/battles/:battle_id
- POST /api/battles/:battle_id/answer

### 3.7 자격증
- GET /api/certifications
- POST /api/user-certifications
- GET /api/user-certifications
- PUT /api/user-certifications/:id

### 3.8 분석 및 리포트
- GET /api/analytics/user-progress
- GET /api/analytics/learning-trends